<lift:surround with="default" at="content">

   <style type="text/css">
    td, th {border: 1px solid black;}
   </style>
	<script src="javascript/loki/loki.js" type="text/javascript"></script>
	   
    <script type="text/javascript">
        // Change all textareas that have the "loki" class to Loki rich-text
        // editors with power-user features:
        Loki.convert_textarea('edit', {options: 'power', use_xhtml: true});
    </script>

<lift:ConstitutionSnippet form="POST">

<h1><top:title /></h1>
<!-- <&y2012.06.11.19:10:53& strange bug:

<div class="snippeterror" style="display: block; padding: 4px; margin: 8px; border: 2px solid red">
<div>
Error locating template:
<b>/constitution.html</b>
<br/>
Message:
<b>expected closing tag of tr</b>

Don't understand, cannot find unclosed tr.
<br/>
-->

<!-- <top:followerInstructions> -->
<!-- todo: only show these when someone is a follower -->
<hr />
<h2>Important tips</h2>
If you are a follower of, and contributor to, this constitution, read these tips:
<ul>
<li>Press the history button, and investigate the performance of your constitution over time, and the effect of your contribution on its score. More tips are to be found in the history view.</li>
</ul>

<hr />

<!-- </top:followerInstructions> -->


<h2>Properties</h2>

<table>
   <tr><td>Creationdate:</td>             <td><top:creationDate /></td>       </tr>
   <tr><td>Created by:</td>               <td><top:creator /></td>            </tr>
   <tr><td>Description:</td>              <td><top:description /></td>        </tr>
   <tr><td>Latest release with fluency score:</td>              <td><top:latestRelease /></td>        </tr>
   <tr><td>Latest fluency score (= score of <top:latestRelease />)</td>             <td><top:fluency /></td>            </tr>
   <tr><td>Number of followers:</td>      <td><top:numberOfFollowers /></td>  </tr>
</table>

<hr />

<h2>General controls</h2>
<table>
   <tr><td colspan="2"><top:revisionHistory /></td></tr>
   <tr><td>Follow this constitution:</td><td><top:followCheckbox /></td></tr>
   <tr><td>Don't forget to save the above changes</td><td><top:saveGeneralControlBt /></td></tr> <!-- <&y2012.06.23.17:41:31& COULDDO: update automatically when someone clicked checkboxes etc. But don't know how to do that elegantly now with scala lift> -->
</table>
<hr />
<!-- edit subsnippet -->
<top:edit>
<h2>Mode = edit</h2>
   
<table>
   <tr><td><top:publishBt /></td><td><a href="TODOexplanation">Publish</a> <!-- <&y2012.06.27.18:28:26& add explanation> -->your addition. Describe what you added: <top:noPublishDescriptionError /></td><td><top:publishDescriptionTextfield /></td></tr>
   <tr><td colspan="3"><hr /></td>                                </tr>
   <tr><td colspan="1">Description</td><td colspan="2"><top:descriptionTextfield /></td>   </tr>
   <tr><td colspan="3"><top:errorInHtml /> </td></tr>
   <tr><td colspan="3" id="kippetje"><top:constitutionEditor /></td>              </tr>
   <tr><td colspan="3"><hr /></td>                                </tr>
   <!-- for some next increment: t<tr> <td><top:cancelBt /> </td><td colspan="3"><top:saveBt /></td>  </td><top:removeBt /> </tr> -->
</table>
</top:edit>

<!-- view subsnippet -->
<top:view>
<h2>Mode = view</h2>
<table>
   <tr><td><top:editBt /></td><td></td> </tr>
   <tr><td colspan="2"><hr />                             </td></tr>
   <tr><td colspan="2"><top:constitutionText /></td>           </tr>
   <tr><td colspan="2"><hr />    </td>                         </tr>
   <tr><td><top:editBt /></td><td></td> </tr>
</table>
</top:view>
</lift:ConstitutionSnippet>

</lift:surround>
